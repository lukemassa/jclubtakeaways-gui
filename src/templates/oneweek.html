{% extends "base.html" %}

{% block head %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
{% endblock %}
{% block pageheader %}
    <h3 id="header">
    </h3>
    {% endblock %}

{% block pagebody %}
<table id="oneweek" class="table table-condensed table-striped">
    <thead>
        <th>Name</th>
        <th>Takeaway</th>
    </thead>
</table>

<script>


$(document).ready(function() {
    var hash = window.location.hash.split('#')[1];
    console.log(hash);
    get_row_from_date(hash, function(row) {

        var html;
        if (row["Presenter"]) {
        
            html = "Takeaways from " + row["Topic"] +
            " by " + row["Presenter"] +
            " on " + row["Date"];
        }
        else {
            html = "No Journal Club on " + row["Date"] +
            " because of " + row["Topic"];
        }
        $("#header").html(html);
    });
    $('#oneweek').sheetrock({
        url:jclubtakeaways ,
        query: 'select A,B',
        rowTemplate: function(e) {
            console.log(e);
            if (JSON.stringify(e.cellsArray)==JSON.stringify(e.labels))
                return "";
            var data = e.cellsArray;
            var name = data[0];
            var takeaway = data[1];
            return "<tr>" +
                   "<td>" + name + "</td>" +
                   "<td>" + takeaway + "</td>" +
                   "</tr>";
        }

    });
});
</script>
{% endblock %}
